---
phase: 02-theme-rebrand-visual-audit
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All interactive elements show visible Royal Blue focus ring when tabbed to"
    - "All button hover states use Royal Blue and meet WCAG AA contrast (3:1 UI)"
    - "App renders without layout breaks in Safari and Firefox"
    - "Arabic locale loads without visual regressions or layout crashes"
    - "PWA manifest shows correct Royal Blue theme color in browser DevTools"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Royal Blue theme implementation across browsers, accessibility standards, and Arabic locale through automated checks and systematic manual testing.

Purpose: Plans 01 and 02 fixed all programmatic issues (hardcoded hex, hover anti-patterns, non-semantic classes). This plan verifies the visual result is correct by running automated checks (codebase scans, build verification) and then having the user perform cross-browser and RTL smoke testing. This completes the Phase 2 audit.

Output: VERIFICATION.md documenting all checks passed, confirming the theme rebrand is visually correct and accessible.
</objective>

<execution_context>
@/Users/ziadadel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ziadadel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-theme-rebrand-visual-audit/02-RESEARCH.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Automated verification sweep</name>
  <files></files>
  <action>
Run a comprehensive automated verification of the theme implementation:

1. **Full hardcoded hex scan:**
   ```bash
   grep -rn '#[0-9A-Fa-f]\{6\}' src/ --include='*.tsx' | grep -v 'layout.tsx' | grep -v 'CHART_COLORS' | grep -v '// --color-'
   ```
   Expected: Zero matches (or only intentionally documented exceptions in admin).

2. **Non-semantic color class scan:**
   ```bash
   grep -rn 'bg-blue-\|text-blue-\|bg-orange-\|text-orange-\|bg-green-\|text-green-\|bg-red-\|text-red-' src/ --include='*.tsx'
   ```
   Expected: Zero matches.

3. **Hover anti-pattern scan:**
   ```bash
   grep -rn 'onMouseEnter\|onMouseLeave' src/ --include='*.tsx'
   ```
   Expected: Zero matches in dashboard pages (may exist in admin if intentional).

4. **Inline style color scan:**
   ```bash
   grep -rn 'style={{.*color\|style={{.*Color\|style={{.*background' src/ --include='*.tsx' | grep -v 'backgroundImage.*gradient' | grep -v 'backgroundSize'
   ```
   Expected: Zero matches (all color styling via Tailwind).

5. **Focus style verification:**
   ```bash
   grep -A 3 'focus-visible' src/app/globals.css
   ```
   Expected: Shows `outline: 4px solid var(--color-ring)` confirming Royal Blue focus ring.

6. **PWA manifest verification:**
   ```bash
   grep 'theme_color' public/manifest.json
   ```
   Expected: `"theme_color": "#4169E1"`

7. **TypeScript compilation:**
   ```bash
   pnpm tsc --noEmit
   ```
   Expected: Clean, no errors.

8. **Production build:**
   ```bash
   pnpm build
   ```
   Expected: Successful build, no errors.

9. **Create VERIFICATION.md** at `.planning/phases/02-theme-rebrand-visual-audit/02-VERIFICATION.md` documenting all automated check results in a structured format:
   ```markdown
   # Phase 2: Theme Visual Audit - Verification Results

   ## Automated Checks

   | Check | Result | Details |
   |-------|--------|---------|
   | Hardcoded hex scan | PASS/FAIL | {count} remaining |
   | Non-semantic color classes | PASS/FAIL | {details} |
   | Hover anti-patterns | PASS/FAIL | {details} |
   | Inline style colors | PASS/FAIL | {details} |
   | Focus styles configured | PASS/FAIL | 4px solid Royal Blue |
   | PWA manifest theme_color | PASS/FAIL | #4169E1 |
   | TypeScript compilation | PASS/FAIL | |
   | Production build | PASS/FAIL | |

   ## Manual Testing Checklist
   (To be completed in Task 2)
   ```
  </action>
  <verify>
All 8 automated checks pass. VERIFICATION.md exists at `.planning/phases/02-theme-rebrand-visual-audit/02-VERIFICATION.md`.
  </verify>
  <done>
All automated verification checks pass. VERIFICATION.md created with automated results documented. Ready for manual cross-browser testing.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Cross-browser and RTL manual verification</name>
  <files></files>
  <action>
Present the user with the manual testing checklist below. The dev server should already be running from Task 1 verification. If not, start it with `pnpm dev`. Wait for user to complete testing and respond with approval or issues.

After user approval, update VERIFICATION.md with the manual testing results (add a "Manual Testing" section with browser-by-browser pass/fail status).
  </action>
  <verify>
User has responded with "approved" or provided specific issues. If issues were found, they have been fixed and re-verified. VERIFICATION.md has been updated with manual testing results.

**Manual testing checklist for the user:**

Start the dev server: `pnpm dev`

**Step 1: Chrome Baseline (5 min)**
1. Open http://localhost:3000/en in Chrome
2. Navigate through: Login -> Dashboard -> Meal Plan -> Workout Plan -> Progress -> Settings
3. Verify Royal Blue appears on all interactive elements (buttons, links, active tabs)
4. Tab through the login page -- verify 4px Royal Blue focus ring appears on each input/button
5. Hover over buttons -- verify they change to Royal Blue background

**Step 2: Safari Testing (5 min)**
1. Open the same URL in Safari
2. Navigate through the same pages
3. Look specifically for:
   - Flexbox alignment issues (cards, grids)
   - Missing grid gaps
   - Sticky header behavior on dashboard
   - Font rendering differences
4. Compare button hover/focus states with Chrome

**Step 3: Firefox Testing (3 min)**
1. Open the same URL in Firefox
2. Quick pass through dashboard, meal plan, progress pages
3. Look for font rendering differences and color consistency

**Step 4: Arabic/RTL Smoke Test (3 min)**
1. Open http://localhost:3000/ar in Chrome
2. Verify page loads without layout crashes
3. Check text is right-aligned
4. Verify Royal Blue colors appear correctly in RTL
5. Navigate to dashboard -- verify cards and layout don't break
6. Check that Arabic font (Cairo) is loading

**Step 5: PWA Verification (1 min)**
1. In Chrome, open DevTools -> Application tab
2. Click "Manifest" in sidebar
3. Verify theme_color shows #4169E1 (Royal Blue)
  </verify>
  <done>
User has approved the visual audit across all three browsers and Arabic locale. VERIFICATION.md updated with complete manual testing results. Phase 2 visual audit is complete.
  </done>
</task>

</tasks>

<verification>
1. All automated scans pass (zero hardcoded hex, zero anti-patterns)
2. TypeScript compilation clean
3. Production build succeeds
4. Human verified Chrome rendering correct
5. Human verified Safari rendering acceptable
6. Human verified Firefox rendering acceptable
7. Human verified Arabic locale doesn't break layout
8. PWA manifest theme_color confirmed #4169E1
</verification>

<success_criteria>
- VERIFICATION.md exists with all automated checks documented as PASS
- User has approved visual rendering across Chrome, Safari, and Firefox
- User has confirmed Arabic locale renders without layout breaks
- PWA manifest confirmed correct in browser DevTools
- Phase 2 success criteria from ROADMAP.md met:
  1. All shadcn/ui components tested in both English and Arabic modes
  2. Focus states, hover states, and disabled states work correctly with Royal Blue
  3. Contrast ratios verified for all interactive elements
  4. Cross-browser testing confirms consistent appearance
</success_criteria>

<output>
After completion, create `.planning/phases/02-theme-rebrand-visual-audit/02-03-SUMMARY.md`
</output>
