---
phase: 11.1-auth-and-authorization-clerk-roles-coach-detection-client-subscription-journey
plan: "03"
subsystem: marketing
tags: [marketing, landing-page, bilingual, convex, next-intl, rtl]
dependency_graph:
  requires: ["11.1-02"]
  provides: ["marketing-landing-page", "pricing-convex-integration"]
  affects: ["apps/marketing"]
tech_stack:
  added: []
  patterns:
    - "useQuery(api.systemConfig.getPlans) for dynamic pricing in client component"
    - "useLocale() for locale-aware field selection (name/nameAr, features/featuresAr)"
    - "Sticky header with language switcher embedded in Hero section"
    - "Smooth scroll via html { scroll-behavior: smooth } + anchor href=#pricing"
key_files:
  created:
    - apps/marketing/src/components/sections/hero.tsx
    - apps/marketing/src/components/sections/features.tsx
    - apps/marketing/src/components/sections/pricing.tsx
    - apps/marketing/src/components/sections/testimonials.tsx
    - apps/marketing/src/components/language-switcher.tsx
  modified:
    - apps/marketing/src/app/[locale]/page.tsx
    - apps/marketing/src/messages/en.json
    - apps/marketing/src/messages/ar.json
decisions:
  - "Language switcher uses usePathname() from next/navigation and segments[1] swap — avoids next-intl router dependency on marketing app"
  - "Hero sticky header embeds language switcher instead of a separate standalone header component — reduces component count"
  - "Pricing badges (Most Popular / Best Value) resolve to translation keys — avoids hardcoded English in Arabic mode"
  - "Pre-existing TS error in convex/pendingSignups.ts (clerkActions) is out of scope — confirmed pre-existed before this plan"
metrics:
  duration: "~16 minutes"
  completed: "2026-02-20"
  tasks: 2
  files: 8
---

# Phase 11.1 Plan 03: Marketing Landing Page Summary

Full marketing landing page with Hero, Features, Pricing (Convex-driven), and Trust signals. Bilingual EN/AR with RTL support and language switcher.

## What Was Built

### Task 1: Hero, Features, Trust Signals, Language Switcher (commit: 37465a2)

**Hero section** (`hero.tsx`):
- Royal blue gradient background using `--color-primary` CSS variable
- Sticky header bar with "FitFast" logo text and language switcher
- Large headline, subheadline, and CTA button scrolling to `#pricing`
- Trust badges: "No setup fees", "English & Arabic", "AI-personalized plans"
- Bottom wave cutout transitioning to page background

**Language switcher** (`language-switcher.tsx`):
- Two-button toggle: EN | AR
- Uses `useLocale()` from next-intl and `usePathname()` + `useRouter()` from next/navigation
- Swaps path segment [1] to new locale — locale prefix is always at position 1
- Active locale highlighted with white background and primary text color

**Features section** (`features.tsx`):
- Three feature cards in a responsive grid (1 col mobile, 3 cols desktop)
- Brain icon → AI-Personalized Plans (royal blue)
- CheckCircle2 icon → Smart Check-ins (emerald)
- MessageCircle icon → Coach Support (violet)
- All text via `useTranslations("landing")`

**Testimonials / Trust signals** (`testimonials.tsx`):
- Three metric cards: 500+ Clients, AI Plans, EN/AR Bilingual
- Icons: Users, Cpu, Globe from lucide-react
- Subtle primary-tinted background section

**Messages**: All EN and AR strings added under `"landing"` namespace — hero, features, trust, pricing namespaces.

### Task 2: Pricing Section and Full Page Assembly (commit: 7cebbef)

**Pricing section** (`pricing.tsx`):
- `useQuery(api.systemConfig.getPlans)` — real-time Convex data, no auth required
- Loading state: three skeleton cards via `Skeleton` from `@fitfast/ui/skeleton`
- Empty state: localized "Plans coming soon" message
- Dynamic cards with locale-aware field selection: `name`/`nameAr`, `duration`/`durationAr`, `features`/`featuresAr`, `badge`/`badgeAr`
- Highlighted plan (has badge) gets primary border + ring + elevated shadow
- Badge labels resolve through translation keys (mostPopular / bestValue)
- Feature list with green checkmark icons
- `onSelectPlan` callback prop for future checkout integration (plan 05)
- `id="pricing"` for smooth scroll from Hero CTA

**Full page** (`page.tsx`):
- Assembled order: Hero → Features → Pricing → Trust Signals → Footer
- Footer with FitFast logo and localized copyright
- `html { scroll-behavior: smooth }` already set in globals.css

## Deviations from Plan

### Pre-existing Issue (Out of Scope)

**convex/pendingSignups.ts TS2339 error** — `Property 'clerkActions' does not exist` at lines 102 and 137. Confirmed pre-existing by verifying it occurs on `git stash` baseline before any plan 03 changes. Logged to deferred items. Not caused by this plan's changes.

## Self-Check

### Files Exist

- FOUND: apps/marketing/src/components/sections/hero.tsx
- FOUND: apps/marketing/src/components/sections/features.tsx
- FOUND: apps/marketing/src/components/sections/pricing.tsx
- FOUND: apps/marketing/src/components/sections/testimonials.tsx
- FOUND: apps/marketing/src/components/language-switcher.tsx

### Commits Exist

- FOUND: 37465a2 (Task 1 commit)
- FOUND: 7cebbef (Task 2 commit)

## Self-Check: PASSED
